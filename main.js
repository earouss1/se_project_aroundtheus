!function(){"use strict";const e=document.querySelector("#profile-edit-button"),t=(document.querySelector("#profile-edit-modal"),document.querySelector("#profile-add-modal")),r=(document.querySelector("#profile-text"),document.querySelector("#profile-sub-text"),document.querySelector("[name='text']")),o=document.querySelector("[name='sub-text']"),s=(document.forms["modal-form"],document.querySelector(".elements__list"),document.querySelector("#card-template").content.firstElementChild,document.querySelector("#profile-add-button")),i=(document.forms["add-card-modal-form"],t.querySelector("#form-profile-title"),t.querySelector("#form-profile-url"),document.querySelector("#preview-image-modal")),n=(i.querySelector(".modal__for-preview-image"),i.querySelector(".modal__for-preview-caption"),document.querySelectorAll(".modal__close-button"),document.forms["chng-picture-modal-form"],document.forms["areusure-modal-form"],document.querySelector(".profile__avatar"),document.querySelector("#profile-avatar-edit"));class a{constructor(e){let{modalSelector:t}=e;this._modalElement=document.querySelector(t),this._handleEscapeClose=this._handleEscapeClose.bind(this),this._handleCloseButtons=this._modalElement.querySelector(".modal__close-button")}open(){this._modalElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose)}close(){this._modalElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}_handleEscapeClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._modalElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_opened")&&this.close()})),this._handleCloseButtons.addEventListener("click",(()=>this.close()))}}class l extends a{constructor(e,t){super({modalSelector:e}),this._modalForm=this._modalElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._modalForm.querySelectorAll(".modal__form-input"),this._modalSubmitButton=this._modalElement.querySelector(".modal__submit-button"),this._modalSubmitButtonText=this._modalSubmitButton.textContent}renderLoadingMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";if(e)return this._modalSubmitButton.textContent=t;this._modalSubmitButton.textContent=this._modalSubmitButtonText}getForm(){return this._modalForm}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._modalForm.reset(),this.close()}))}}class d{constructor(e,t,r,o,s){this._data=e,this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=r,this._handleDeleteCardClick=o,this._id=e._id,this._isLiked=e._isLiked,this._handleLikeCardClick=s}_setEventListeners(){this._cardLikeButton.addEventListener("click",(()=>{this._handleLikeCardClick(this)})),this._cardDeleteButton.addEventListener("click",(()=>{this._handleDeleteCardClick(this)})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getId(){return this._id}getIsLiked(){return this._isLiked}handleLikeButton(){this._cardLikeButton.classList.toggle("element__composite-like-button_active")}_getCardTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".element").cloneNode(!0)}getView(){return this._cardElement=this._getCardTemplate(),this._cardImageElement=this._cardElement.querySelector(".element__image"),this._cardTitleElement=this._cardElement.querySelector(".element__composite-title"),this._cardDeleteButton=this._cardElement.querySelector(".element__delete-button"),this._cardLikeButton=this._cardElement.querySelector(".element__composite-like-button"),this._cardTitleElement.textContent=this._data.name,this._cardImageElement.src=this._data.link,this._cardImageElement.alt=this._data.name,this._isLiked?this._cardLikeButton.classList.add("element__composite-like-button_active"):this._cardLikeButton.classList.remove("element__composite-like-button_active"),this._setEventListeners(),this._cardElement}}class c{constructor(e,t){this._options=e,this._formElement=t,this._inputElements=[...this._formElement.querySelectorAll(this._options.inputSelector)],this._submitButtonElement=this._formElement.querySelector(this._options.submitButtonSelector)}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputElements,this._submitButtonElement,this._options)}))}))}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._options.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._options.errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._options.inputErrorClass),t.textContent="",t.classList.remove(this._options.errorClass)}_toggleButtonState(){let e=!1;if(this._inputElements.forEach((t=>{t.validity.valid||(e=!0)})),!e)return this._enableButton();this.disableButton()}disableButton(){this._submitButtonElement.classList.add(this._options.inactiveButtonClass),this._submitButtonElement.disabled=!0}_enableButton(){this._submitButtonElement.classList.remove(this._options.inactiveButtonClass),this._submitButtonElement.disabled=!1}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}}const m=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{throw console.error(e),e}))}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{throw console.error(e),e}))}loadAllData(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}createNewCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{throw console.error(e),e}))}setUserUpdate(e){let{profileText:t,profileSubText:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{throw console.error(e),e}))}deleteCards(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{throw console.error(e),e}))}addLikeforCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{throw console.error(e),e}))}removeLikefromCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{throw console.error(e),e}))}setPictureUpdate(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>{throw console.error(e),e}))}}({baseUrl:" https://around-api.en.tripleten-services.com/v1",headers:{authorization:"85fd4e98-2985-4ae5-a23e-063a04cf6983","Content-Type":"application/json"}});function h(e){return new d(e,"#card-template",L,y,k).getView()}const u=new class{constructor(e,t){let{items:r,renderer:o}=e;this._renderer=o,this._items=r,this._container=document.querySelector(t)}renderItems(e){(e||this._items).forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}empty(){this._container.innerHTML=""}}({renderer:e=>{u.addItem(h(e))}},".elements__list"),_={};var p;p={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_disabled",inputErrorClass:"modal__form-input_type_error",errorClass:"modal__form-error_visible"},Array.from(document.querySelectorAll(p.formSelector)).forEach((e=>{const t=new c(p,e),r=e.getAttribute("name");_[r]=t,t.enableValidation()}));const f=new class{constructor(e){let{profileName:t,profileJob:r,profilePicture:o}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(r),this._profilePicture=document.querySelector(o)}getUserInfo(){return{profileText:this._profileName.textContent,profileSubText:this._profileJob.textContent,avatar:this._profilePicture.src}}setUserInfo(e){let{name:t,about:r,avatar:o}=e;this._profileName.textContent=t,this._profileJob.textContent=r}setUserPicture(e){let{avatar:t}=e;this._profilePicture.src=t}}({profileName:"#profile-text",profileJob:"#profile-sub-text",profilePicture:".profile__avatar"}),E=new l("#profile-add-modal",(function(e){let{title:t,url:r}=e;const o={name:t,link:r};E.renderLoadingMessage(!0),m.createNewCard(o).then((e=>{u.addItem(h(e)),E.close(),_["add-cards"].disableButton()})).catch((e=>{console.error("Error occured while adding card",e)})).finally((()=>{E.renderLoadingMessage()}))}));E.setEventListeners();const b=new l("#profile-edit-modal",(function(e){f.setUserInfo({profileText:e.text,profileSubText:e["sub-text"]}),b.renderLoadingMessage(!0);const t={profileText:e.text,profileSubText:e["sub-text"]};m.setUserUpdate(t).then((e=>{f.setUserInfo(e),b.close(),_["edit-profile"].disableButton()})).catch((e=>{console.error("Error has occured",e)})).finally((()=>{b.renderLoadingMessage()}))}));b.setEventListeners();const v=new l("#profile-chng-modal",(function(e){const t=e.profilePicUrl;console.log(e),t||console.error("Link is missing"),v.renderLoadingMessage(!0),m.setPictureUpdate(t).then((e=>{console.log(e),f.setUserPicture(e),v.close(),_["profile-pic-chng"].disableButton()})).catch((e=>{console.error(`An error happened when updating user information: ${e}`)})).finally((()=>{v.renderLoadingMessage()}))}));v.setEventListeners();const S=new class extends a{constructor(e){super(e),this._image=this._modalElement.querySelector(".modal__for-preview-image"),this._caption=this._modalElement.querySelector(".modal__for-preview-caption")}open(e){let{link:t,name:r}=e;this._image.src=t,this._image.alt=r,this._caption.textContent=r,super.open()}}({modalSelector:"#preview-image-modal"});S.setEventListeners();const g=new class extends a{constructor(e){let{modalSelector:t}=e;super({modalSelector:t}),this._modalSubmitButton=this._modalElement.querySelector(".modal__submit-button"),this._modalSubmitButtonText=this._modalSubmitButton.textContent,this._modalForm=this._modalElement.querySelector(".modal__form")}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Deleting...";if(e)return this._modalSubmitButton.textContent=t;this._modalSubmitButton.textContent=this._modalSubmitButtonText}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleRemoveVerify()}))}handleRemoveVerify(e){this._handleRemoveVerify=e}}({modalSelector:"#chng-img-qt-modal"});function L(e){S.open(e)}function y(e){g.open(),g.handleRemoveVerify((()=>{g.renderLoading(!0),m.deleteCards(e._id).then((()=>{e.handleDeleteCard(),g.close()})).catch((e=>{console.error("Error occured while deleting card",e)})).finally((()=>{g.renderLoading()}))}))}function k(e){e.getIsLiked()?m.removeLikefromCard(e.getId()).then((()=>{e.handleLikeButton()})).catch((e=>{console.error(`Can't remove like. Check again: ${e}`)})):m.addLikeforCard(e.getId()).then((()=>{e.handleLikeButton()})).catch((e=>{console.error(`Can't add like. Please check again: ${e}`)}))}g.setEventListeners(),e.addEventListener("click",(()=>{const e=f.getUserInfo();r.value=e.profileText,o.value=e.profileSubText,b.open()})),s.addEventListener("click",(()=>{E.open()})),n.addEventListener("click",(()=>{v.open()})),m.loadAllData().then((e=>{let[t,r]=e;u.renderItems(t),f.setUserInfo(r),f.setUserPicture({avatar:r.avatar})})).catch((e=>{console.error(`Can't load card or picture: ${e}`)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQUEsTUF1Q2FBLEVBQW9CQyxTQUFTQyxjQUFjLHdCQUUzQ0MsR0FEbUJGLFNBQVNDLGNBQWMsdUJBQ3BCRCxTQUFTQyxjQUFjLHVCQUc3Q0UsR0FGY0gsU0FBU0MsY0FBYyxpQkFDcEJELFNBQVNDLGNBQWMscUJBQ3JCRCxTQUFTQyxjQUFjLGtCQUMxQ0csRUFBc0JKLFNBQVNDLGNBQWMscUJBSzdDSSxHQUprQkwsU0FBU00sTUFBTSxjQUNmTixTQUFTQyxjQUFjLG1CQUVwREQsU0FBU0MsY0FBYyxrQkFBa0JNLFFBQVFDLGtCQUNuQlIsU0FBU0MsY0FBYyx3QkFPMUNRLEdBTmNULFNBQVNNLE1BQU0sdUJBQ1pKLEVBQW9CRCxjQUNoRCx1QkFHQUMsRUFBb0JELGNBQWMscUJBQ0hELFNBQVNDLGNBQWMseUJBZTNDUyxHQWRvQkQsRUFBa0JSLGNBQ2pELDZCQUVpQ1EsRUFBa0JSLGNBQ25ELCtCQUc2QkQsU0FBU1csaUJBQ3RDLHdCQUcrQlgsU0FBU00sTUFBTSwyQkFDZk4sU0FBU00sTUFBTSx1QkFDaEJOLFNBQVNDLGNBQWMsb0JBQ2xCRCxTQUFTQyxjQUM1Qyx5QkN6RWEsTUFBTVcsRUFDbkJDLFdBQUFBLENBQVdDLEdBQW9CLElBQW5CLGNBQUVDLEdBQWVELEVBQzNCRSxLQUFLQyxjQUFnQmpCLFNBQVNDLGNBQWNjLEdBQzVDQyxLQUFLRSxtQkFBcUJGLEtBQUtFLG1CQUFtQkMsS0FBS0gsTUFDdkRBLEtBQUtJLG9CQUFzQkosS0FBS0MsY0FBY2hCLGNBQzVDLHVCQUVKLENBRUFvQixJQUFBQSxHQUNFTCxLQUFLQyxjQUFjSyxVQUFVQyxJQUFJLGdCQUNqQ3ZCLFNBQVN3QixpQkFBaUIsVUFBV1IsS0FBS0UsbUJBQzVDLENBRUFPLEtBQUFBLEdBRUVULEtBQUtDLGNBQWNLLFVBQVVJLE9BQU8sZ0JBQ3BDMUIsU0FBUzJCLG9CQUFvQixVQUFXWCxLQUFLRSxtQkFDL0MsQ0FFQUEsa0JBQUFBLENBQW1CVSxHQUNELFdBQVpBLEVBQUlDLEtBQ05iLEtBQUtTLE9BRVQsQ0FFQUssaUJBQUFBLEdBQ0VkLEtBQUtDLGNBQWNPLGlCQUFpQixhQUFjSSxJQUM1Q0EsRUFBSUcsT0FBT1QsVUFBVVUsU0FBUyxpQkFDaENoQixLQUFLUyxPQUNQLElBR0ZULEtBQUtJLG9CQUFvQkksaUJBQWlCLFNBQVMsSUFBTVIsS0FBS1MsU0FDaEUsRUNoQ2EsTUFBTVEsVUFBdUJyQixFQUMxQ0MsV0FBQUEsQ0FBWUUsRUFBZW1CLEdBQ3pCQyxNQUFNLENBQUVwQixrQkFDUkMsS0FBS29CLFdBQWFwQixLQUFLQyxjQUFjaEIsY0FBYyxnQkFDbkRlLEtBQUtxQixrQkFBb0JILEVBQ3pCbEIsS0FBS3NCLFdBQWF0QixLQUFLb0IsV0FBV3pCLGlCQUFpQixzQkFDbkRLLEtBQUt1QixtQkFBcUJ2QixLQUFLQyxjQUFjaEIsY0FDM0MseUJBRUZlLEtBQUt3Qix1QkFBeUJ4QixLQUFLdUIsbUJBQW1CRSxXQUN4RCxDQUVBQyxvQkFBQUEsQ0FBcUJDLEdBQXlDLElBQTlCQyxFQUFjQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFHLFlBQy9DLEdBQUlGLEVBQ0YsT0FBUTNCLEtBQUt1QixtQkFBbUJFLFlBQWNHLEVBRWhENUIsS0FBS3VCLG1CQUFtQkUsWUFBY3pCLEtBQUt3QixzQkFDN0MsQ0FFQVEsT0FBQUEsR0FDRSxPQUFPaEMsS0FBS29CLFVBQ2QsQ0FFQWEsZUFBQUEsR0FDRSxNQUFNQyxFQUFrQixDQUFDLEVBSXpCLE9BSEFsQyxLQUFLc0IsV0FBV2EsU0FBU0MsSUFDdkJGLEVBQWdCRSxFQUFNQyxNQUFRRCxFQUFNRSxLQUFLLElBRXBDSixDQUNULENBRUFLLGNBQUFBLENBQWVDLEdBQ2J4QyxLQUFLc0IsV0FBV2EsU0FBU0MsSUFDdkJBLEVBQU1FLE1BQVFFLEVBQUtKLEVBQU1DLEtBQUssR0FFbEMsQ0FFQXZCLGlCQUFBQSxHQUNFSyxNQUFNTCxvQkFDTmQsS0FBS29CLFdBQVdaLGlCQUFpQixVQUFXSSxJQUMxQ0EsRUFBSTZCLGlCQUNKekMsS0FBS3FCLGtCQUFrQnJCLEtBQUtpQyxtQkFDNUJqQyxLQUFLb0IsV0FBV3NCLFFBQ2hCMUMsS0FBS1MsT0FBTyxHQUVoQixFQy9DYSxNQUFNa0MsRUFDbkI5QyxXQUFBQSxDQUNFMkMsRUFDQUksRUFDQUMsRUFDQUMsRUFDQUMsR0FFQS9DLEtBQUtnRCxNQUFRUixFQUNieEMsS0FBS2lELE1BQVFULEVBQUtILEtBQ2xCckMsS0FBS2tELE1BQVFWLEVBQUtXLEtBQ2xCbkQsS0FBS29ELGNBQWdCUixFQUNyQjVDLEtBQUtxRCxrQkFBb0JSLEVBQ3pCN0MsS0FBS3NELHVCQUF5QlIsRUFDOUI5QyxLQUFLdUQsSUFBTWYsRUFBS2UsSUFDaEJ2RCxLQUFLd0QsU0FBV2hCLEVBQUtnQixTQUNyQnhELEtBQUt5RCxxQkFBdUJWLENBQzlCLENBRUFXLGtCQUFBQSxHQUNFMUQsS0FBSzJELGdCQUFnQm5ELGlCQUFpQixTQUFTLEtBQzdDUixLQUFLeUQscUJBQXFCekQsS0FBSyxJQUdqQ0EsS0FBSzRELGtCQUFrQnBELGlCQUFpQixTQUFTLEtBQy9DUixLQUFLc0QsdUJBQXVCdEQsS0FBSyxJQUduQ0EsS0FBSzZELGtCQUFrQnJELGlCQUFpQixTQUFTLEtBQy9DUixLQUFLcUQsa0JBQWtCckQsS0FBS2dELE1BQU0sR0FFdEMsQ0FFQWMsZ0JBQUFBLEdBQ0U5RCxLQUFLK0QsYUFBYXJELFNBQ2xCVixLQUFLK0QsYUFBZSxJQUN0QixDQUVBQyxLQUFBQSxHQUNFLE9BQU9oRSxLQUFLdUQsR0FDZCxDQUVBVSxVQUFBQSxHQUNFLE9BQU9qRSxLQUFLd0QsUUFDZCxDQUVBVSxnQkFBQUEsR0FDRWxFLEtBQUsyRCxnQkFBZ0JyRCxVQUFVNkQsT0FDN0Isd0NBRUosQ0FFQUMsZ0JBQUFBLEdBS0UsT0FKb0JwRixTQUNqQkMsY0FBY2UsS0FBS29ELGVBQ25CN0QsUUFBUU4sY0FBYyxZQUN0Qm9GLFdBQVUsRUFFZixDQUVBQyxPQUFBQSxHQTZCRSxPQTVCQXRFLEtBQUsrRCxhQUFlL0QsS0FBS29FLG1CQUN6QnBFLEtBQUs2RCxrQkFBb0I3RCxLQUFLK0QsYUFBYTlFLGNBQWMsbUJBQ3pEZSxLQUFLdUUsa0JBQW9CdkUsS0FBSytELGFBQWE5RSxjQUN6Qyw2QkFFRmUsS0FBSzRELGtCQUFvQjVELEtBQUsrRCxhQUFhOUUsY0FDekMsMkJBRUZlLEtBQUsyRCxnQkFBa0IzRCxLQUFLK0QsYUFBYTlFLGNBQ3ZDLG1DQUdGZSxLQUFLdUUsa0JBQWtCOUMsWUFBY3pCLEtBQUtnRCxNQUFNWCxLQUNoRHJDLEtBQUs2RCxrQkFBa0JXLElBQU14RSxLQUFLZ0QsTUFBTUcsS0FDeENuRCxLQUFLNkQsa0JBQWtCWSxJQUFNekUsS0FBS2dELE1BQU1YLEtBRXBDckMsS0FBS3dELFNBQ1B4RCxLQUFLMkQsZ0JBQWdCckQsVUFBVUMsSUFDN0IseUNBR0ZQLEtBQUsyRCxnQkFBZ0JyRCxVQUFVSSxPQUM3Qix5Q0FJSlYsS0FBSzBELHFCQUVFMUQsS0FBSytELFlBQ2QsRUMxRmEsTUFBTVcsRUFDbkI3RSxXQUFBQSxDQUFZOEUsRUFBU0MsR0FDbkI1RSxLQUFLNkUsU0FBV0YsRUFDaEIzRSxLQUFLOEUsYUFBZUYsRUFDcEI1RSxLQUFLK0UsZUFBaUIsSUFDakIvRSxLQUFLOEUsYUFBYW5GLGlCQUFpQkssS0FBSzZFLFNBQVNHLGdCQUV0RGhGLEtBQUtpRixxQkFBdUJqRixLQUFLOEUsYUFBYTdGLGNBQzVDZSxLQUFLNkUsU0FBU0sscUJBRWxCLENBRUFDLGdCQUFBQSxHQUNFbkYsS0FBSzhFLGFBQWF0RSxpQkFBaUIsVUFBV0ksSUFDNUNBLEVBQUk2QixnQkFBZ0IsSUFFdEJ6QyxLQUFLMEQsb0JBQ1AsQ0FFQUEsa0JBQUFBLEdBQ0UxRCxLQUFLK0UsZUFBZTVDLFNBQVNpRCxJQUMzQkEsRUFBYTVFLGlCQUFpQixTQUFTLEtBQ3JDUixLQUFLcUYsb0JBQW9CRCxHQUN6QnBGLEtBQUtzRixtQkFDSHRGLEtBQUsrRSxlQUNML0UsS0FBS2lGLHFCQUNMakYsS0FBSzZFLFNBQ04sR0FDRCxHQUVOLENBRUFVLGVBQUFBLENBQWdCSCxHQUNkLE1BQU1JLEVBQXNCeEYsS0FBSzhFLGFBQWE3RixjQUM1QyxJQUFJbUcsRUFBYUssWUFFbkJMLEVBQWE5RSxVQUFVQyxJQUFJUCxLQUFLNkUsU0FBU2EsaUJBQ3pDRixFQUFvQi9ELFlBQWMyRCxFQUFhTyxrQkFDL0NILEVBQW9CbEYsVUFBVUMsSUFBSVAsS0FBSzZFLFNBQVNlLFdBQ2xELENBRUFDLGVBQUFBLENBQWdCVCxHQUNkLE1BQU1JLEVBQXNCeEYsS0FBSzhFLGFBQWE3RixjQUM1QyxJQUFJbUcsRUFBYUssWUFFbkJMLEVBQWE5RSxVQUFVSSxPQUFPVixLQUFLNkUsU0FBU2EsaUJBQzVDRixFQUFvQi9ELFlBQWMsR0FDbEMrRCxFQUFvQmxGLFVBQVVJLE9BQU9WLEtBQUs2RSxTQUFTZSxXQUNyRCxDQUVBTixrQkFBQUEsR0FDRSxJQUFJUSxHQUFrQixFQVF0QixHQU5BOUYsS0FBSytFLGVBQWU1QyxTQUFTaUQsSUFDdEJBLEVBQWFXLFNBQVNDLFFBQ3pCRixHQUFrQixFQUNwQixLQUdFQSxFQUdGLE9BQU85RixLQUFLaUcsZ0JBRlpqRyxLQUFLa0csZUFJVCxDQUVBQSxhQUFBQSxHQUNFbEcsS0FBS2lGLHFCQUFxQjNFLFVBQVVDLElBQUlQLEtBQUs2RSxTQUFTc0IscUJBQ3REbkcsS0FBS2lGLHFCQUFxQm1CLFVBQVcsQ0FDdkMsQ0FFQUgsYUFBQUEsR0FDRWpHLEtBQUtpRixxQkFBcUIzRSxVQUFVSSxPQUNsQ1YsS0FBSzZFLFNBQVNzQixxQkFFaEJuRyxLQUFLaUYscUJBQXFCbUIsVUFBVyxDQUN2QyxDQUVBZixtQkFBQUEsQ0FBb0JELEdBQ2xCLElBQUtBLEVBQWFXLFNBQVNDLE1BQ3pCLE9BQU9oRyxLQUFLdUYsZ0JBQWdCSCxHQUU5QnBGLEtBQUs2RixnQkFBZ0JULEVBQ3ZCLENBRUFpQixlQUFBQSxHQUNFckcsS0FBS3NGLHFCQUVMdEYsS0FBSytFLGVBQWU1QyxTQUFTaUQsSUFDM0JwRixLQUFLNkYsZ0JBQWdCVCxFQUFhLEdBRXRDLEVDbkVGLE1BQU1rQixFQUFNLElDeEJHLE1BQ2J6RyxXQUFBQSxDQUFXQyxHQUF1QixJQUF0QixRQUFFeUcsRUFBTyxRQUFFQyxHQUFTMUcsRUFDOUJFLEtBQUt5RyxTQUFXRixFQUNoQnZHLEtBQUswRyxTQUFXRixDQUNsQixDQUVBRyxlQUFBQSxHQUNFLE9BQU9DLE1BQU0sR0FBRzVHLEtBQUt5RyxpQkFBa0IsQ0FBRUQsUUFBU3hHLEtBQUswRyxXQUNwREcsTUFBTUMsR0FDRUEsRUFBSUMsR0FBS0QsRUFBSUUsT0FBU0MsUUFBUUMsT0FBTyxVQUFVSixFQUFJSyxZQUUzREMsT0FBT0MsSUFFTixNQURBQyxRQUFRQyxNQUFNRixHQUNSQSxDQUFHLEdBRWYsQ0FFQUcsV0FBQUEsR0FDRSxPQUFPWixNQUFNLEdBQUc1RyxLQUFLeUcsb0JBQXFCLENBQUVELFFBQVN4RyxLQUFLMEcsV0FDdkRHLE1BQU1DLEdBQ0VBLEVBQUlDLEdBQUtELEVBQUlFLE9BQVNDLFFBQVFDLE9BQU8sVUFBVUosRUFBSUssWUFFM0RDLE9BQU9DLElBRU4sTUFEQUMsUUFBUUMsTUFBTUYsR0FDUkEsQ0FBRyxHQUVmLENBRUFJLFdBQUFBLEdBQ0UsT0FBT1IsUUFBUVMsSUFBSSxDQUFDMUgsS0FBSzJHLGtCQUFtQjNHLEtBQUt3SCxlQUNuRCxDQUVBRyxhQUFBQSxDQUFhQyxHQUFpQixJQUFoQixLQUFFdkYsRUFBSSxLQUFFYyxHQUFNeUUsRUFDMUIsT0FBT2hCLE1BQU0sR0FBRzVHLEtBQUt5RyxpQkFBa0IsQ0FDckNvQixPQUFRLE9BQ1JyQixRQUFTeEcsS0FBSzBHLFNBQ2RvQixLQUFNQyxLQUFLQyxVQUFVLENBQ25CM0YsT0FDQWMsV0FHRDBELE1BQU1DLEdBQ0VBLEVBQUlDLEdBQUtELEVBQUlFLE9BQVNDLFFBQVFDLE9BQU8sVUFBVUosRUFBSUssWUFFM0RDLE9BQU9DLElBRU4sTUFEQUMsUUFBUUMsTUFBTUYsR0FDUkEsQ0FBRyxHQUVmLENBRUFZLGFBQUFBLENBQWFDLEdBQWtDLElBQWpDLFlBQUVDLEVBQVcsZUFBRUMsR0FBZ0JGLEVBQzNDLE9BQU90QixNQUFNLEdBQUc1RyxLQUFLeUcsb0JBQXFCLENBQ3hDb0IsT0FBUSxRQUNSckIsUUFBU3hHLEtBQUswRyxTQUNkb0IsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQjNGLEtBQU04RixFQUNORSxNQUFPRCxNQUdSdkIsTUFBTUMsR0FDRUEsRUFBSUMsR0FBS0QsRUFBSUUsT0FBU0MsUUFBUUMsT0FBTyxVQUFVSixFQUFJSyxZQUUzREMsT0FBT0MsSUFFTixNQURBQyxRQUFRQyxNQUFNRixHQUNSQSxDQUFHLEdBRWYsQ0FFQWlCLFdBQUFBLENBQVlDLEdBQ1YsT0FBTzNCLE1BQU0sR0FBRzVHLEtBQUt5RyxrQkFBa0I4QixJQUFVLENBQy9DVixPQUFRLFNBQ1JyQixRQUFTeEcsS0FBSzBHLFdBRWJHLE1BQU1DLEdBQ0VBLEVBQUlDLEdBQUtELEVBQUlFLE9BQVNDLFFBQVFDLE9BQU8sVUFBVUosRUFBSUssWUFFM0RDLE9BQU9DLElBRU4sTUFEQUMsUUFBUUMsTUFBTUYsR0FDUkEsQ0FBRyxHQUVmLENBRUFtQixjQUFBQSxDQUFlRCxHQUNiLE9BQU8zQixNQUFNLEdBQUc1RyxLQUFLeUcsa0JBQWtCOEIsVUFBZ0IsQ0FDckRWLE9BQVEsTUFDUnJCLFFBQVN4RyxLQUFLMEcsV0FFYkcsTUFBTUMsR0FDRUEsRUFBSUMsR0FBS0QsRUFBSUUsT0FBU0MsUUFBUUMsT0FBTyxVQUFVSixFQUFJSyxZQUUzREMsT0FBT0MsSUFFTixNQURBQyxRQUFRQyxNQUFNRixHQUNSQSxDQUFHLEdBRWYsQ0FFQW9CLGtCQUFBQSxDQUFtQkYsR0FDakIsT0FBTzNCLE1BQU0sR0FBRzVHLEtBQUt5RyxrQkFBa0I4QixVQUFnQixDQUNyRFYsT0FBUSxTQUNSckIsUUFBU3hHLEtBQUswRyxXQUViRyxNQUFNQyxHQUNFQSxFQUFJQyxHQUFLRCxFQUFJRSxPQUFTQyxRQUFRQyxPQUFPLFVBQVVKLEVBQUlLLFlBRTNEQyxPQUFPQyxJQUVOLE1BREFDLFFBQVFDLE1BQU1GLEdBQ1JBLENBQUcsR0FFZixDQUVBcUIsZ0JBQUFBLENBQWlCQyxHQUNmLE9BQU8vQixNQUFNLEdBQUc1RyxLQUFLeUcsMkJBQTRCLENBQy9Db0IsT0FBUSxRQUNSckIsUUFBU3hHLEtBQUswRyxTQUNkb0IsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQlksT0FBUUQsTUFHVDlCLE1BQU1DLEdBQ0VBLEVBQUlDLEdBQUtELEVBQUlFLE9BQVNDLFFBQVFDLE9BQU8sVUFBVUosRUFBSUssWUFFM0RDLE9BQU9DLElBRU4sTUFEQUMsUUFBUUMsTUFBTUYsR0FDUkEsQ0FBRyxHQUVmLEdEckdrQixDQUNsQmQsUUFBUyxtREFDVEMsUUFBUyxDQUNQcUMsY0FBZSx1Q0FDZixlQUFnQixzQkFNcEIsU0FBU0MsRUFBYXRHLEdBUXBCLE9BUGEsSUFBSUcsRUFDZkgsRUFDQSxpQkFDQUssRUFDQWtHLEVBQ0FDLEdBRVUxRSxTQUNkLENBRUEsTUFBTTJFLEVBQWUsSUU3Q04sTUFDYnBKLFdBQUFBLENBQVdDLEVBQXNCb0osR0FBbUIsSUFBeEMsTUFBRUMsRUFBSyxTQUFFQyxHQUFVdEosRUFDN0JFLEtBQUtxSixVQUFZRCxFQUNqQnBKLEtBQUtzSixPQUFTSCxFQUNkbkosS0FBS3VKLFdBQWF2SyxTQUFTQyxjQUFjaUssRUFDM0MsQ0FFQU0sV0FBQUEsQ0FBWUwsSUFDWUEsR0FBU25KLEtBQUtzSixRQUV0Qm5ILFNBQVNzSCxJQUNyQnpKLEtBQUtxSixVQUFVSSxFQUFLLEdBR3hCLENBRUFDLE9BQUFBLENBQVFDLEdBQ04zSixLQUFLdUosV0FBV0ssUUFBUUQsRUFDMUIsQ0FFQUUsS0FBQUEsR0FDRTdKLEtBQUt1SixXQUFXTyxVQUFZLEVBQzlCLEdGd0JBLENBRUVWLFNBQVc1RyxJQUNUeUcsRUFBYVMsUUFBUVosRUFBYXRHLEdBQU0sR0FHNUMsbUJBSUl1SCxFQUFpQixDQUFDLEVBRUVwRixRTGtCSCxDQUNyQnFGLGFBQWMsZUFDZGhGLGNBQWUscUJBQ2ZFLHFCQUFzQix3QkFDdEJpQixvQkFBcUIsZ0NBQ3JCVCxnQkFBaUIsK0JBQ2pCRSxXQUFZLDZCS3ZCU3FFLE1BQU1DLEtBQ3pCbEwsU0FBU1csaUJBQWlCZ0YsRUFBUXFGLGVBRXZCN0gsU0FBU3lDLElBQ3BCLE1BQU11RixFQUFZLElBQUl6RixFQUFjQyxFQUFTQyxHQUN2Q3dGLEVBQVd4RixFQUFZeUYsYUFBYSxRQUMxQ04sRUFBZUssR0FBWUQsRUFDM0JBLEVBQVVoRixrQkFBa0IsSUFPaEMsTUFBTW1GLEVBQVcsSUd6RUYsTUFDYnpLLFdBQUFBLENBQVdDLEdBQThDLElBQTdDLFlBQUV5SyxFQUFXLFdBQUVDLEVBQVUsZUFBRUMsR0FBZ0IzSyxFQUNyREUsS0FBSzBLLGFBQWUxTCxTQUFTQyxjQUFjc0wsR0FDM0N2SyxLQUFLMkssWUFBYzNMLFNBQVNDLGNBQWN1TCxHQUMxQ3hLLEtBQUs0SyxnQkFBa0I1TCxTQUFTQyxjQUFjd0wsRUFDaEQsQ0FFQWpELFdBQUFBLEdBQ0UsTUFBTyxDQUNMVyxZQUFhbkksS0FBSzBLLGFBQWFqSixZQUMvQjJHLGVBQWdCcEksS0FBSzJLLFlBQVlsSixZQUNqQ21ILE9BQVE1SSxLQUFLNEssZ0JBQWdCcEcsSUFFakMsQ0FFQXFHLFdBQUFBLENBQVdqRCxHQUEwQixJQUF6QixLQUFFdkYsRUFBSSxNQUFFZ0csRUFBSyxPQUFFTyxHQUFRaEIsRUFDakM1SCxLQUFLMEssYUFBYWpKLFlBQWNZLEVBQ2hDckMsS0FBSzJLLFlBQVlsSixZQUFjNEcsQ0FFakMsQ0FFQXlDLGNBQUFBLENBQWM1QyxHQUFhLElBQVosT0FBRVUsR0FBUVYsRUFDdkJsSSxLQUFLNEssZ0JBQWdCcEcsSUFBTW9FLENBQzdCLEdIa0Q0QixDQUM1QjJCLFlBQWEsZ0JBQ2JDLFdBQVksb0JBQ1pDLGVBQWdCLHFCQUlaTSxFQUFlLElBQUk5SixFQUN2QixzQkFtQ0YsU0FBbUNuQixHQUFpQixJQUFoQixNQUFFa0wsRUFBSyxJQUFFQyxHQUFLbkwsRUFDaEQsTUFBTTBDLEVBQU8sQ0FBRUgsS0FBTTJJLEVBQU83SCxLQUFNOEgsR0FDbENGLEVBQWFySixzQkFBcUIsR0FDbEM0RSxFQUNHcUIsY0FBY25GLEdBQ2RxRSxNQUFNcUUsSUFDTGpDLEVBQWFTLFFBQVFaLEVBQWFvQyxJQUNsQ0gsRUFBYXRLLFFBRWJzSixFQUFlLGFBQWE3RCxlQUFlLElBRTVDa0IsT0FBT0csSUFDTkQsUUFBUUMsTUFBTSxrQ0FBbUNBLEVBQU0sSUFFeEQ0RCxTQUFRLEtBQ1BKLEVBQWFySixzQkFBc0IsR0FPekMsSUF0REFxSixFQUFhakssb0JBRWIsTUFBTXNLLEVBQW1CLElBQUluSyxFQUMzQix1QkFxREYsU0FBd0NvSyxHQUN0Q2YsRUFBU08sWUFBWSxDQUNuQjFDLFlBQWFrRCxFQUFTQyxLQUN0QmxELGVBQWdCaUQsRUFBUyxjQUUzQkQsRUFBaUIxSixzQkFBcUIsR0FDdEMsTUFBTWMsRUFBTyxDQUNYMkYsWUFBYWtELEVBQVNDLEtBQ3RCbEQsZUFBZ0JpRCxFQUFTLGFBRTNCL0UsRUFDRzJCLGNBQWN6RixHQUNkcUUsTUFBTTBFLElBQ0xqQixFQUFTTyxZQUFZVSxHQUVyQkgsRUFBaUIzSyxRQUNqQnNKLEVBQWUsZ0JBQWdCN0QsZUFBZSxJQUUvQ2tCLE9BQU9HLElBQ05ELFFBQVFDLE1BQU0sb0JBQXFCQSxFQUFNLElBRTFDNEQsU0FBUSxLQUNQQyxFQUFpQjFKLHNCQUFzQixHQUU3QyxJQTFFQTBKLEVBQWlCdEssb0JBRWpCLE1BQU0wSyxFQUFxQixJQUFJdkssRUFDN0IsdUJBeUVGLFNBQTBDb0ssR0FDeEMsTUFBTUksRUFBYUosRUFBU0ssY0FDNUJwRSxRQUFRcUUsSUFBSU4sR0FDUEksR0FDSG5FLFFBQVFDLE1BQU0sbUJBRWhCaUUsRUFBbUI5SixzQkFBcUIsR0FFeEM0RSxFQUNHb0MsaUJBQWlCK0MsR0FDakI1RSxNQUFNK0UsSUFDTHRFLFFBQVFxRSxJQUFJQyxHQUNadEIsRUFBU1EsZUFBZWMsR0FDeEJKLEVBQW1CL0ssUUFDbkJzSixFQUFlLG9CQUFvQjdELGVBQWUsSUFFbkRrQixPQUFPRyxJQUNORCxRQUFRQyxNQUNOLHFEQUFxREEsSUFDdEQsSUFFRjRELFNBQVEsS0FDUEssRUFBbUI5SixzQkFBc0IsR0FFL0MsSUE5RkE4SixFQUFtQjFLLG9CQUduQixNQUFNK0ssRUFBb0IsSUlqR1gsY0FBOEJqTSxFQUMzQ0MsV0FBQUEsQ0FBWUUsR0FDVm9CLE1BQU1wQixHQUNOQyxLQUFLOEwsT0FBUzlMLEtBQUtDLGNBQWNoQixjQUFjLDZCQUMvQ2UsS0FBSytMLFNBQVcvTCxLQUFLQyxjQUFjaEIsY0FDakMsOEJBRUosQ0FFQW9CLElBQUFBLENBQUlQLEdBQWlCLElBQWhCLEtBQUVxRCxFQUFJLEtBQUVkLEdBQU12QyxFQUNqQkUsS0FBSzhMLE9BQU90SCxJQUFNckIsRUFDbEJuRCxLQUFLOEwsT0FBT3JILElBQU1wQyxFQUNsQnJDLEtBQUsrTCxTQUFTdEssWUFBY1ksRUFDNUJsQixNQUFNZCxNQUNSLEdKbUY0QyxDQUM1Q04sY0FBZSx5QkFFakI4TCxFQUFrQi9LLG9CQUdsQixNQUFNa0wsRUFBcUIsSUt2R1osY0FBcUNwTSxFQUNsREMsV0FBQUEsQ0FBV0MsR0FBb0IsSUFBbkIsY0FBRUMsR0FBZUQsRUFDM0JxQixNQUFNLENBQUVwQixrQkFDUkMsS0FBS3VCLG1CQUFxQnZCLEtBQUtDLGNBQWNoQixjQUMzQyx5QkFFRmUsS0FBS3dCLHVCQUF5QnhCLEtBQUt1QixtQkFBbUJFLFlBQ3REekIsS0FBS29CLFdBQWFwQixLQUFLQyxjQUFjaEIsY0FBYyxlQUNyRCxDQUVBZ04sYUFBQUEsQ0FBY3RLLEdBQTJDLElBQWhDQyxFQUFjQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFHLGNBQ3hDLEdBQUlGLEVBQ0YsT0FBUTNCLEtBQUt1QixtQkFBbUJFLFlBQWNHLEVBRWhENUIsS0FBS3VCLG1CQUFtQkUsWUFBY3pCLEtBQUt3QixzQkFDN0MsQ0FFQVYsaUJBQUFBLEdBQ0VLLE1BQU1MLG9CQUNOZCxLQUFLb0IsV0FBV1osaUJBQWlCLFVBQVdJLElBQzFDQSxFQUFJNkIsaUJBQ0p6QyxLQUFLa00scUJBQXFCLEdBRTlCLENBRUFDLGtCQUFBQSxDQUFtQkMsR0FDakJwTSxLQUFLa00sb0JBQXNCRSxDQUM3QixHTDRFb0QsQ0FDcERyTSxjQUFlLHVCQU1qQixTQUFTOEMsRUFBaUJMLEdBQ3hCcUosRUFBa0J4TCxLQUFLbUMsRUFDekIsQ0E4RUEsU0FBU3VHLEVBQXNCc0QsR0FDN0JMLEVBQW1CM0wsT0FDbkIyTCxFQUFtQkcsb0JBQW1CLEtBQ3BDSCxFQUFtQkMsZUFBYyxHQUNqQzNGLEVBQ0dnQyxZQUFZK0QsRUFBSzlJLEtBQ2pCc0QsTUFBSyxLQUNKd0YsRUFBS3ZJLG1CQUNMa0ksRUFBbUJ2TCxPQUFPLElBRTNCMkcsT0FBT0csSUFDTkQsUUFBUUMsTUFBTSxvQ0FBcUNBLEVBQU0sSUFFMUQ0RCxTQUFRLEtBQ1BhLEVBQW1CQyxlQUFlLEdBQ2xDLEdBRVIsQ0FFQSxTQUFTakQsRUFBb0JxRCxHQUN0QkEsRUFBS3BJLGFBVVJxQyxFQUNHbUMsbUJBQW1CNEQsRUFBS3JJLFNBQ3hCNkMsTUFBSyxLQUNKd0YsRUFBS25JLGtCQUFrQixJQUV4QmtELE9BQU9HLElBQ05ELFFBQVFDLE1BQU0sbUNBQW1DQSxJQUFRLElBZjdEakIsRUFDR2tDLGVBQWU2RCxFQUFLckksU0FDcEI2QyxNQUFLLEtBQ0p3RixFQUFLbkksa0JBQWtCLElBRXhCa0QsT0FBT0csSUFDTkQsUUFBUUMsTUFBTSx1Q0FBdUNBLElBQVEsR0FZckUsQ0EzSEF5RSxFQUFtQmxMLG9CQTZIbkIvQixFQUFrQnlCLGlCQUFpQixTQUFTLEtBQzFDLE1BQU04TCxFQUFrQmhDLEVBQVM5QyxjQUNqQ3JJLEVBQWlCbUQsTUFBUWdLLEVBQWdCbkUsWUFDekMvSSxFQUFvQmtELE1BQVFnSyxFQUFnQmxFLGVBQzVDZ0QsRUFBaUIvSyxNQUFNLElBR3pCaEIsRUFBaUJtQixpQkFBaUIsU0FBUyxLQUN6Q3VLLEVBQWExSyxNQUFNLElBR3JCWCxFQUFzQmMsaUJBQWlCLFNBQVMsS0FDOUNnTCxFQUFtQm5MLE1BQU0sSUFJM0JpRyxFQUNHbUIsY0FDQVosTUFBS2UsSUFBdUIsSUFBckIyRSxFQUFPQyxHQUFTNUUsRUFDdEJxQixFQUFhTyxZQUFZK0MsR0FDekJqQyxFQUFTTyxZQUFZMkIsR0FDckJsQyxFQUFTUSxlQUFlLENBQUVsQyxPQUFRNEQsRUFBUzVELFFBQVMsSUFFckR4QixPQUFPRyxJQUNORCxRQUFRQyxNQUFNLCtCQUErQkEsSUFBUSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL01vZGFsLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlcy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvTW9kYWxBcmVZb3VTdXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNhcmREYXRhMSA9IHtcclxuICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxufTtcclxuXHJcbmNvbnN0IGNhcmREYXRhMiA9IHtcclxuICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG59O1xyXG5cclxuY29uc3QgY2FyZERhdGEzID0ge1xyXG4gIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbn07XHJcblxyXG5jb25zdCBjYXJkRGF0YTQgPSB7XHJcbiAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbn07XHJcblxyXG5jb25zdCBjYXJkRGF0YTUgPSB7XHJcbiAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxufTtcclxuXHJcbmNvbnN0IGNhcmREYXRhNiA9IHtcclxuICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIGNhcmREYXRhMSxcclxuICBjYXJkRGF0YTIsXHJcbiAgY2FyZERhdGEzLFxyXG4gIGNhcmREYXRhNCxcclxuICBjYXJkRGF0YTUsXHJcbiAgY2FyZERhdGE2LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1hZGQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10ZXh0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVN1YlRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtc3ViLXRleHRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5wdXRUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSd0ZXh0J11cIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW5wdXRTdWJUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSdzdWItdGV4dCddXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJtb2RhbC1mb3JtXCJdO1xyXG5leHBvcnQgY29uc3QgY2FyZExpc3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlzdFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtbW9kYWwtZm9ybVwiXTtcclxuZXhwb3J0IGNvbnN0IGNhcmRUaXRsZUlucHV0ID0gcHJvZmlsZUFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI2Zvcm0tcHJvZmlsZS10aXRsZVwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBjYXJkVXJsSW5wdXQgPVxyXG4gIHByb2ZpbGVBZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNmb3JtLXByb2ZpbGUtdXJsXCIpO1xyXG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3TW9kYWxJbWFnZSA9IHByZXZpZXdJbWFnZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2Zvci1wcmV2aWV3LWltYWdlXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdNb2RhbENhcHRpb24gPSBwcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19mb3ItcHJldmlldy1jYXB0aW9uXCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhbGxDbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG4gIFwiLm1vZGFsX19jbG9zZS1idXR0b25cIlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNoYW5nZVBpY3R1cmVmb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJjaG5nLXBpY3R1cmUtbW9kYWwtZm9ybVwiXTtcclxuZXhwb3J0IGNvbnN0IGNvbmZpcm1EZWxldGVGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJhcmV1c3VyZS1tb2RhbC1mb3JtXCJdO1xyXG5leHBvcnQgY29uc3QgY2hhbmdlUHJvZmlsZVBpYyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBpY3R1cmVDaG5nQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWF2YXRhci1lZGl0XCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBvcHRpb25zID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybS1pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0tZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbCB7XHJcbiAgY29uc3RydWN0b3IoeyBtb2RhbFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9oYW5kbGVDbG9zZUJ1dHRvbnMgPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX21vZGFsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiY2xvc2VcIik7XHJcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUNsb3NlKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NhcGVDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbW9kYWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUNsb3NlQnV0dG9ucy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhGb3JtcyBleHRlbmRzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fbW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm0taW5wdXRcIik7XHJcbiAgICB0aGlzLl9tb2RhbFN1Ym1pdEJ1dHRvbiA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fbW9kYWxTdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fbW9kYWxTdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nTWVzc2FnZShpc0xvYWRpbmcsIGxvYWRpbmdNZXNzYWdlID0gXCJTYXZpbmcuLi5cIikge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICByZXR1cm4gKHRoaXMuX21vZGFsU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ01lc3NhZ2UpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fbW9kYWxTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9tb2RhbFN1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21vZGFsRm9ybTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1JbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGZvcm1JbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZm9ybUlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fbW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5fbW9kYWxGb3JtLnJlc2V0KCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGRhdGEsXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZENsaWNrLFxyXG4gICAgaGFuZGxlTGlrZUNhcmRDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZENsaWNrID0gaGFuZGxlRGVsZXRlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLl9pc0xpa2VkO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNhcmRDbGljayA9IGhhbmRsZUxpa2VDYXJkQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2FyZENsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fZGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlTGlrZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXHJcbiAgICAgIFwiZWxlbWVudF9fY29tcG9zaXRlLWxpa2UtYnV0dG9uX2FjdGl2ZVwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2dldENhcmRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldENhcmRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZWxlbWVudF9fY29tcG9zaXRlLXRpdGxlXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZWxlbWVudF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZExpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5lbGVtZW50X19jb21wb3NpdGUtbGlrZS1idXR0b25cIlxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9kYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX2RhdGEubmFtZTtcclxuXHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgIFwiZWxlbWVudF9fY29tcG9zaXRlLWxpa2UtYnV0dG9uX2FjdGl2ZVwiXHJcbiAgICAgICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICAgIFwiZWxlbWVudF9fY29tcG9zaXRlLWxpa2UtYnV0dG9uX2FjdGl2ZVwiXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX29wdGlvbnMuaW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX29wdGlvbnMuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoXHJcbiAgICAgICAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLFxyXG4gICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudCxcclxuICAgICAgICAgIHRoaXMuX29wdGlvbnNcclxuICAgICAgICApO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX29wdGlvbnMuaW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3B0aW9ucy5lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcHRpb25zLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9vcHRpb25zLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgbGV0IGhhc0ludmFsaWRJbnB1dCA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgaGFzSW52YWxpZElucHV0ID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGhhc0ludmFsaWRJbnB1dCkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9lbmFibGVCdXR0b24oKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fb3B0aW9ucy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcclxuICAgICAgdGhpcy5fb3B0aW9ucy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvLyBBbGwgSW1wb3J0c1xyXG5cclxuaW1wb3J0IHtcclxuICAvL2luaXRpYWxDYXJkcyxcclxuICBwcm9maWxlSW5wdXRUZXh0LFxyXG4gIHByb2ZpbGVJbnB1dFN1YlRleHQsXHJcbiAgYWRkTmV3Q2FyZEJ1dHRvbixcclxuICBwcm9maWxlRWRpdEJ1dHRvbixcclxuICBvcHRpb25zLFxyXG4gIHByb2ZpbGVQaWN0dXJlQ2huZ0J0bixcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcblxyXG5pbXBvcnQgTW9kYWxXaXRoSW1hZ2VzIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlcy5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgTW9kYWxXaXRoRm9ybXMgZnJvbSBcIi4uL2NvbXBvbmVudHMvTW9kYWxXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBBUGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhDb25maXJtRGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsQXJlWW91U3VyZS5qc1wiO1xyXG5cclxuLy8gQVBJIHNldC11cFxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFQaSh7XHJcbiAgYmFzZVVybDogXCIgaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjg1ZmQ0ZTk4LTI5ODUtNGFlNS1hMjNlLTA2M2EwNGNmNjk4M1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBQYXNzaW5nIEZ1bmN0aW9uYWxpdHkgZm9yIENhcmRcclxuXHJcbmZ1bmN0aW9uIGdlbmVyYXRlQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgZGF0YSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVDYXJkRGVsZXRlQ2xpY2ssXHJcbiAgICBoYW5kbGVDYXJkTGlrZUNsaWNrXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIC8vaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICBjYXJkc1NlY3Rpb24uYWRkSXRlbShnZW5lcmF0ZUNhcmQoZGF0YSkpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmVsZW1lbnRzX19saXN0XCJcclxuKTtcclxuXHJcbi8vIEluc3RhbnRpYXRlZCBGb3JtVmFsaWRhdG9yIGNsYXNzXHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKG9wdGlvbnMpID0+IHtcclxuICBjb25zdCBmb3JtRWxlbWVudHMgPSBBcnJheS5mcm9tKFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChvcHRpb25zLmZvcm1TZWxlY3RvcilcclxuICApO1xyXG4gIGZvcm1FbGVtZW50cy5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgZm9ybUVsZW1lbnQpO1xyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybU5hbWVdID0gdmFsaWRhdG9yO1xyXG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24ob3B0aW9ucyk7XHJcblxyXG4vLyBJbnN0YW50aWF0ZWQgVXNlckluZm8gY2xhc3NcclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHByb2ZpbGVOYW1lOiBcIiNwcm9maWxlLXRleHRcIixcclxuICBwcm9maWxlSm9iOiBcIiNwcm9maWxlLXN1Yi10ZXh0XCIsXHJcbiAgcHJvZmlsZVBpY3R1cmU6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxyXG59KTtcclxuXHJcbi8vIEluc3RhbnRpYXRlZCBNb2RhbFdpdGhGb3JtIGNsYXNzXHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IG5ldyBNb2RhbFdpdGhGb3JtcyhcclxuICBcIiNwcm9maWxlLWFkZC1tb2RhbFwiLFxyXG4gIGhhbmRsZUFkZENhcmRFbGVtZW50U3VibWl0XHJcbik7XHJcbmFkZENhcmRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IG5ldyBNb2RhbFdpdGhGb3JtcyhcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRWRpdEVsZW1lbnRTdWJtaXRcclxuKTtcclxuZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgY2hhbmdlUGljdHVyZU1vZGFsID0gbmV3IE1vZGFsV2l0aEZvcm1zKFxyXG4gIFwiI3Byb2ZpbGUtY2huZy1tb2RhbFwiLFxyXG4gIGhhbmRsZUNoYW5nZVBpY3R1cmVFbGVtZW50U3VibWl0XHJcbik7XHJcbmNoYW5nZVBpY3R1cmVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gSW5zdGFudGlhdGVkIE1vZGFsV2l0aEltYWdlIGNsYXNzXHJcbmNvbnN0IGltYWdlUHJldmlld01vZGFsID0gbmV3IE1vZGFsV2l0aEltYWdlcyh7XHJcbiAgbW9kYWxTZWxlY3RvcjogXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiLFxyXG59KTtcclxuaW1hZ2VQcmV2aWV3TW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIEluc3RhbnRpYXRlZCBNb2RhbFdpdGhDb25maXJtRGVsZXRlIGNsYXNzXHJcbmNvbnN0IGNvbmZpcm1EZWxldGVNb2RhbCA9IG5ldyBNb2RhbFdpdGhDb25maXJtRGVsZXRlKHtcclxuICBtb2RhbFNlbGVjdG9yOiBcIiNjaG5nLWltZy1xdC1tb2RhbFwiLFxyXG59KTtcclxuY29uZmlybURlbGV0ZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBBZGRpbmcgRnVuY3Rpb25hbGl0eSBhbmQgQVBJIHRvIHRoZSBjbGFzcyBJbnN0YW5jZVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhkYXRhKSB7XHJcbiAgaW1hZ2VQcmV2aWV3TW9kYWwub3BlbihkYXRhKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEVsZW1lbnRTdWJtaXQoeyB0aXRsZSwgdXJsIH0pIHtcclxuICBjb25zdCBkYXRhID0geyBuYW1lOiB0aXRsZSwgbGluazogdXJsIH07XHJcbiAgYWRkQ2FyZE1vZGFsLnJlbmRlckxvYWRpbmdNZXNzYWdlKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmNyZWF0ZU5ld0NhcmQoZGF0YSlcclxuICAgIC50aGVuKChjYXJkQ3JlYXRlZCkgPT4ge1xyXG4gICAgICBjYXJkc1NlY3Rpb24uYWRkSXRlbShnZW5lcmF0ZUNhcmQoY2FyZENyZWF0ZWQpKTtcclxuICAgICAgYWRkQ2FyZE1vZGFsLmNsb3NlKCk7XHJcbiAgICAgIC8vYWRkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICAgIGZvcm1WYWxpZGF0b3JzW1wiYWRkLWNhcmRzXCJdLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvY2N1cmVkIHdoaWxlIGFkZGluZyBjYXJkXCIsIGVycm9yKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGFkZENhcmRNb2RhbC5yZW5kZXJMb2FkaW5nTWVzc2FnZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gIC8vIGNhcmRzU2VjdGlvbi5hZGRJdGVtKGdlbmVyYXRlQ2FyZChkYXRhKSk7XHJcbiAgLy8gYWRkQ2FyZE1vZGFsLmNsb3NlKCk7XHJcbiAgLy8gLy9hZGRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTtcclxuICAvLyBmb3JtVmFsaWRhdG9yc1tcImFkZC1jYXJkc1wiXS5kaXNhYmxlQnV0dG9uKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0RWxlbWVudFN1Ym1pdCh1c2VyZGF0YSkge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgIHByb2ZpbGVUZXh0OiB1c2VyZGF0YS50ZXh0LFxyXG4gICAgcHJvZmlsZVN1YlRleHQ6IHVzZXJkYXRhW1wic3ViLXRleHRcIl0sXHJcbiAgfSk7XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5yZW5kZXJMb2FkaW5nTWVzc2FnZSh0cnVlKTtcclxuICBjb25zdCBkYXRhID0ge1xyXG4gICAgcHJvZmlsZVRleHQ6IHVzZXJkYXRhLnRleHQsXHJcbiAgICBwcm9maWxlU3ViVGV4dDogdXNlcmRhdGFbXCJzdWItdGV4dFwiXSxcclxuICB9O1xyXG4gIGFwaVxyXG4gICAgLnNldFVzZXJVcGRhdGUoZGF0YSlcclxuICAgIC50aGVuKChuZXdEYXRhKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKG5ld0RhdGEpO1xyXG5cclxuICAgICAgZWRpdFByb2ZpbGVNb2RhbC5jbG9zZSgpO1xyXG4gICAgICBmb3JtVmFsaWRhdG9yc1tcImVkaXQtcHJvZmlsZVwiXS5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaGFzIG9jY3VyZWRcIiwgZXJyb3IpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZWRpdFByb2ZpbGVNb2RhbC5yZW5kZXJMb2FkaW5nTWVzc2FnZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNoYW5nZVBpY3R1cmVFbGVtZW50U3VibWl0KHVzZXJkYXRhKSB7XHJcbiAgY29uc3QgcGljdHVyZVVsciA9IHVzZXJkYXRhLnByb2ZpbGVQaWNVcmw7XHJcbiAgY29uc29sZS5sb2codXNlcmRhdGEpO1xyXG4gIGlmICghcGljdHVyZVVscikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkxpbmsgaXMgbWlzc2luZ1wiKTtcclxuICB9XHJcbiAgY2hhbmdlUGljdHVyZU1vZGFsLnJlbmRlckxvYWRpbmdNZXNzYWdlKHRydWUpO1xyXG5cclxuICBhcGlcclxuICAgIC5zZXRQaWN0dXJlVXBkYXRlKHBpY3R1cmVVbHIpXHJcbiAgICAudGhlbigocGljdHVyZURhdGEpID0+IHtcclxuICAgICAgY29uc29sZS5sb2cocGljdHVyZURhdGEpO1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyUGljdHVyZShwaWN0dXJlRGF0YSk7XHJcbiAgICAgIGNoYW5nZVBpY3R1cmVNb2RhbC5jbG9zZSgpO1xyXG4gICAgICBmb3JtVmFsaWRhdG9yc1tcInByb2ZpbGUtcGljLWNobmdcIl0uZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihcclxuICAgICAgICBgQW4gZXJyb3IgaGFwcGVuZWQgd2hlbiB1cGRhdGluZyB1c2VyIGluZm9ybWF0aW9uOiAke2Vycm9yfWBcclxuICAgICAgKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGNoYW5nZVBpY3R1cmVNb2RhbC5yZW5kZXJMb2FkaW5nTWVzc2FnZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmREZWxldGVDbGljayhjYXJkKSB7XHJcbiAgY29uZmlybURlbGV0ZU1vZGFsLm9wZW4oKTtcclxuICBjb25maXJtRGVsZXRlTW9kYWwuaGFuZGxlUmVtb3ZlVmVyaWZ5KCgpID0+IHtcclxuICAgIGNvbmZpcm1EZWxldGVNb2RhbC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkcyhjYXJkLl9pZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgIGNvbmZpcm1EZWxldGVNb2RhbC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9jY3VyZWQgd2hpbGUgZGVsZXRpbmcgY2FyZFwiLCBlcnJvcik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBjb25maXJtRGVsZXRlTW9kYWwucmVuZGVyTG9hZGluZygpO1xyXG4gICAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2VDbGljayhjYXJkKSB7XHJcbiAgaWYgKCFjYXJkLmdldElzTGlrZWQoKSkge1xyXG4gICAgYXBpXHJcbiAgICAgIC5hZGRMaWtlZm9yQ2FyZChjYXJkLmdldElkKCkpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLmhhbmRsZUxpa2VCdXR0b24oKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYENhbid0IGFkZCBsaWtlLiBQbGVhc2UgY2hlY2sgYWdhaW46ICR7ZXJyb3J9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLnJlbW92ZUxpa2Vmcm9tQ2FyZChjYXJkLmdldElkKCkpXHJcbiAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICBjYXJkLmhhbmRsZUxpa2VCdXR0b24oKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYENhbid0IHJlbW92ZSBsaWtlLiBDaGVjayBhZ2FpbjogJHtlcnJvcn1gKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IGN1cnJlbnRVc2VySW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZUlucHV0VGV4dC52YWx1ZSA9IGN1cnJlbnRVc2VySW5mby5wcm9maWxlVGV4dDtcclxuICBwcm9maWxlSW5wdXRTdWJUZXh0LnZhbHVlID0gY3VycmVudFVzZXJJbmZvLnByb2ZpbGVTdWJUZXh0O1xyXG4gIGVkaXRQcm9maWxlTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVQaWN0dXJlQ2huZ0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNoYW5nZVBpY3R1cmVNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8gR2V0IENBcmQgYW5kIFByb2ZpbGUgbW9kYWxcclxuYXBpXHJcbiAgLmxvYWRBbGxEYXRhKClcclxuICAudGhlbigoW2NhcmRzLCB1c2VyRGF0YV0pID0+IHtcclxuICAgIGNhcmRzU2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyUGljdHVyZSh7IGF2YXRhcjogdXNlckRhdGEuYXZhdGFyIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihgQ2FuJ3QgbG9hZCBjYXJkIG9yIHBpY3R1cmU6ICR7ZXJyb3J9YCk7XHJcbiAgfSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFQaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGxvYWRBbGxEYXRhKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZU5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJVcGRhdGUoeyBwcm9maWxlVGV4dCwgcHJvZmlsZVN1YlRleHQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IHByb2ZpbGVUZXh0LFxyXG4gICAgICAgIGFib3V0OiBwcm9maWxlU3ViVGV4dCxcclxuICAgICAgfSksXHJcbiAgICB9KVxyXG4gICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmRzKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlZm9yQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZWZyb21DYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHJldHVybiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgIHRocm93IGVycjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRQaWN0dXJlVXBkYXRlKHBpY3R1cmVVcmwpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBwaWN0dXJlVXJsLFxyXG4gICAgICB9KSxcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBjb25zdCBpdGVtc1RvUmVuZGVyID0gaXRlbXMgfHwgdGhpcy5faXRlbXM7XHJcblxyXG4gICAgaXRlbXNUb1JlbmRlci5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgICAvL3RoaXMuZW1wdHkoKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBlbXB0eSgpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZSwgcHJvZmlsZUpvYiwgcHJvZmlsZVBpY3R1cmUgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lKTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVKb2IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZVBpY3R1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVQaWN0dXJlKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcHJvZmlsZVRleHQ6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBwcm9maWxlU3ViVGV4dDogdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudCxcclxuICAgICAgYXZhdGFyOiB0aGlzLl9wcm9maWxlUGljdHVyZS5zcmMsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3Byb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgIC8vdGhpcy5zZXRVc2VyUGljdHVyZShhdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlclBpY3R1cmUoeyBhdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fcHJvZmlsZVBpY3R1cmUuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4vTW9kYWwuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsV2l0aEltYWdlcyBleHRlbmRzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fbW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvci1wcmV2aWV3LWltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fZm9yLXByZXZpZXctY2FwdGlvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3Blbih7IGxpbmssIG5hbWUgfSkge1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IE1vZGFsIGZyb20gXCIuL01vZGFsXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhDb25maXJtRGVsZXRlIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKHsgbW9kYWxTZWxlY3RvciB9KSB7XHJcbiAgICBzdXBlcih7IG1vZGFsU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9tb2RhbFN1Ym1pdEJ1dHRvbiA9IHRoaXMuX21vZGFsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fbW9kYWxTdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fbW9kYWxTdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9tb2RhbEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nTWVzc2FnZSA9IFwiRGVsZXRpbmcuLi5cIikge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICByZXR1cm4gKHRoaXMuX21vZGFsU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ01lc3NhZ2UpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fbW9kYWxTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9tb2RhbFN1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVSZW1vdmVWZXJpZnkoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlUmVtb3ZlVmVyaWZ5KHJlY2FsbCkge1xyXG4gICAgdGhpcy5faGFuZGxlUmVtb3ZlVmVyaWZ5ID0gcmVjYWxsO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsicHJvZmlsZUVkaXRCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlQWRkQ2FyZE1vZGFsIiwicHJvZmlsZUlucHV0VGV4dCIsInByb2ZpbGVJbnB1dFN1YlRleHQiLCJhZGROZXdDYXJkQnV0dG9uIiwiZm9ybXMiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJwcmV2aWV3SW1hZ2VNb2RhbCIsInByb2ZpbGVQaWN0dXJlQ2huZ0J0biIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJNb2RhbCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsIm1vZGFsU2VsZWN0b3IiLCJ0aGlzIiwiX21vZGFsRWxlbWVudCIsIl9oYW5kbGVFc2NhcGVDbG9zZSIsImJpbmQiLCJfaGFuZGxlQ2xvc2VCdXR0b25zIiwib3BlbiIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiTW9kYWxXaXRoRm9ybXMiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfbW9kYWxGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwiX21vZGFsU3VibWl0QnV0dG9uIiwiX21vZGFsU3VibWl0QnV0dG9uVGV4dCIsInRleHRDb250ZW50IiwicmVuZGVyTG9hZGluZ01lc3NhZ2UiLCJpc0xvYWRpbmciLCJsb2FkaW5nTWVzc2FnZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImdldEZvcm0iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtSW5wdXRWYWx1ZXMiLCJmb3JFYWNoIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJzZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDYXJkQ2xpY2siLCJoYW5kbGVMaWtlQ2FyZENsaWNrIiwiX2RhdGEiLCJfbmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkQ2xpY2siLCJfaWQiLCJfaXNMaWtlZCIsIl9oYW5kbGVMaWtlQ2FyZENsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2NhcmRMaWtlQnV0dG9uIiwiX2NhcmREZWxldGVCdXR0b24iLCJfY2FyZEltYWdlRWxlbWVudCIsImhhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEVsZW1lbnQiLCJnZXRJZCIsImdldElzTGlrZWQiLCJoYW5kbGVMaWtlQnV0dG9uIiwidG9nZ2xlIiwiX2dldENhcmRUZW1wbGF0ZSIsImNsb25lTm9kZSIsImdldFZpZXciLCJfY2FyZFRpdGxlRWxlbWVudCIsInNyYyIsImFsdCIsIkZvcm1WYWxpZGF0b3IiLCJvcHRpb25zIiwiZm9ybUVsZW1lbnQiLCJfb3B0aW9ucyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dEVsZW1lbnRzIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JDbGFzcyIsIl9oaWRlSW5wdXRFcnJvciIsImhhc0ludmFsaWRJbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfZW5hYmxlQnV0dG9uIiwiZGlzYWJsZUJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsInJlc2V0VmFsaWRhdGlvbiIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImdldFVzZXJJbmZvIiwibG9hZEFsbERhdGEiLCJhbGwiLCJjcmVhdGVOZXdDYXJkIiwiX3JlZjIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInNldFVzZXJVcGRhdGUiLCJfcmVmMyIsInByb2ZpbGVUZXh0IiwicHJvZmlsZVN1YlRleHQiLCJhYm91dCIsImRlbGV0ZUNhcmRzIiwiY2FyZElkIiwiYWRkTGlrZWZvckNhcmQiLCJyZW1vdmVMaWtlZnJvbUNhcmQiLCJzZXRQaWN0dXJlVXBkYXRlIiwicGljdHVyZVVybCIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJnZW5lcmF0ZUNhcmQiLCJoYW5kbGVDYXJkRGVsZXRlQ2xpY2siLCJoYW5kbGVDYXJkTGlrZUNsaWNrIiwiY2FyZHNTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2l0ZW1zIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImVtcHR5IiwiaW5uZXJIVE1MIiwiZm9ybVZhbGlkYXRvcnMiLCJmb3JtU2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsInVzZXJJbmZvIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwicHJvZmlsZVBpY3R1cmUiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUpvYiIsIl9wcm9maWxlUGljdHVyZSIsInNldFVzZXJJbmZvIiwic2V0VXNlclBpY3R1cmUiLCJhZGRDYXJkTW9kYWwiLCJ0aXRsZSIsInVybCIsImNhcmRDcmVhdGVkIiwiZmluYWxseSIsImVkaXRQcm9maWxlTW9kYWwiLCJ1c2VyZGF0YSIsInRleHQiLCJuZXdEYXRhIiwiY2hhbmdlUGljdHVyZU1vZGFsIiwicGljdHVyZVVsciIsInByb2ZpbGVQaWNVcmwiLCJsb2ciLCJwaWN0dXJlRGF0YSIsImltYWdlUHJldmlld01vZGFsIiwiX2ltYWdlIiwiX2NhcHRpb24iLCJjb25maXJtRGVsZXRlTW9kYWwiLCJyZW5kZXJMb2FkaW5nIiwiX2hhbmRsZVJlbW92ZVZlcmlmeSIsImhhbmRsZVJlbW92ZVZlcmlmeSIsInJlY2FsbCIsImNhcmQiLCJjdXJyZW50VXNlckluZm8iLCJjYXJkcyIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==